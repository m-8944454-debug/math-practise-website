<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PSPM SM025 Practice</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --bg:#0f172a;
  --panel:#111827;
  --card:#1f2937;
  --primary:#38bdf8;
  --text:#e5e7eb;
  --muted:#94a3b8;
  --danger:#ef4444;
  --success:#22c55e;
}
*{box-sizing:border-box}
body{
  margin:0;
  display:flex;
  font-family:Inter,system-ui,sans-serif;
  background:var(--bg);
  color:var(--text);
}
.sidebar{
  width:240px;
  background:var(--panel);
  padding:16px;
  display:flex;
  flex-direction:column;
  gap:12px;
  overflow-y:auto;
}
.sidebar h2{color:var(--primary)}
.sidebar button{
  background:none;border:none;color:var(--text);
  padding:10px;border-radius:8px;text-align:left;cursor:pointer;
}
.sidebar button:hover,.sidebar button.active{background:var(--card)}
.main{flex:1;padding:24px}
.card{background:var(--card);padding:16px;border-radius:12px;margin-bottom:16px}
.btn{
  background:var(--primary);border:none;
  padding:10px 16px;border-radius:8px;font-weight:600;cursor:pointer;
}
.btn.secondary{background:#334155;color:var(--text)}
.btn.danger{background:var(--danger);color:white}
.page{display:none}
.page.active{display:block}
input,textarea,select{
  width:100%;padding:10px;border-radius:8px;border:none;
  margin-top:8px;background:#020617;color:var(--text);
}
.quiz-header{
  display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;
}
.success{color:var(--success)}
.error{color:var(--danger)}
</style>
</head>

<body>

<div class="sidebar">
  <h2>PSPM SM025</h2>
  <div class="card">
    <strong>PSPM SM025</strong><br>
    <span id="countdown">-- days</span>
  </div>
  <button class="active" onclick="showPage('home',this)">üè† Home</button>
  <button onclick="showPage('quiz',this)">‚úèÔ∏è Practice</button>
  <button onclick="showPage('rewards',this)">üéØ Goals & Rewards</button>
  <button onclick="showPage('profile',this)">üë§ Profile</button>
  <button onclick="showPage('data',this)">üìä Data</button>
</div>

<div class="main">

<!-- Home -->
<div id="home" class="page active">
  <div class="card" style="text-align:center">
    <h1>Master PSPM SM025</h1>
    <p class="muted">Practice. Earn points. Reward yourself.</p>
  </div>
</div>

<!-- Quiz -->
<div id="quiz" class="page">
  <div class="quiz-header">
    <div>
      <select id="topicSelect" onchange="loadQuestion(true)">
        <option value="vector">Vector</option>
        <option value="integration">Integration</option>
      </select>
      <select id="levelSelect" onchange="loadQuestion(true)">
        <option value="1">‚≠ê Beginner</option>
        <option value="2">‚≠ê‚≠ê Intermediate</option>
        <option value="3">‚≠ê‚≠ê‚≠ê Advanced</option>
      </select>
    </div>
    <button class="btn secondary" onclick="showPage('home')">Exit</button>
  </div>

  <div class="card">
    <h3 id="question"></h3>
    <input id="answer" placeholder="Your answer">
    <br><br>
    <button class="btn" onclick="checkAnswer()">Submit</button>
    <p id="feedback"></p>
  </div>
</div>

<!-- Rewards -->
<div id="rewards" class="page">
  <div class="card">
    <h2>Goals & Rewards</h2>
    <input id="goalInput" placeholder="Goal (e.g. Score 80%)">
    <input id="rewardInput" placeholder="Reward (e.g. Watch movie)">
    <button class="btn" onclick="addGoal()">Add Goal</button>
    <ul id="goalList"></ul>
  </div>
</div>

<!-- Profile -->
<div id="profile" class="page">
  <div class="card">
    <h2>Profile</h2>
    <input id="nameInput" placeholder="Your name">
    <textarea id="motivationInput" placeholder="Your motivation"></textarea>
    <br>
    <button class="btn" onclick="saveProfile()">Save</button>
    <p id="profileMsg"></p>
    <hr>
    <button class="btn danger" onclick="clearAll()">Clear All Data</button>
  </div>
</div>

<!-- Data -->
<div id="data" class="page">
  <div class="card">
    <h2>Data Statistics</h2>
    <p>Total answered: <span id="total">0</span></p>
    <p>Vector: <span id="vectorCount">0</span></p>
    <p>Integration: <span id="integrationCount">0</span></p>
  </div>
</div>

</div>

<script>
/* ---------- State ---------- */
let stats=JSON.parse(localStorage.getItem("stats"))||{total:0,vector:0,integration:0};
let goalPairs=JSON.parse(localStorage.getItem("goalPairs"))||[];
let wrongCount=0;
let currentAnswer="",currentTip="";
let lastIndex=-1;

/* ---------- Questions ---------- */
const qBank={
  vector:{
    1:[{q:"Find magnitude of (3,4)",a:"5",tip:"‚àö(x¬≤+y¬≤)"}],
    2:[{q:"(1,2)¬∑(3,4)",a:"11",tip:"ax+by"}],
    3:[{q:"Are (2,4) & (1,2) parallel?",a:"yes",tip:"Scalar multiple"}]
  },
  integration:{
    1:[{q:"‚à´ x dx",a:"x^2/2",tip:"Power rule"}],
    2:[{q:"‚à´ 2x e^(x^2) dx",a:"e^(x^2)",tip:"Substitution"}],
    3:[{q:"Area y=x, 0‚Üí1",a:"1/2",tip:"Triangle area"}]
  }
};

/* ---------- Navigation ---------- */
function showPage(id,btn){
  document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  document.querySelectorAll(".sidebar button").forEach(b=>b.classList.remove("active"));
  if(btn) btn.classList.add("active");
}

/* ---------- Quiz ---------- */
function loadQuestion(reset=false){
  wrongCount=0;
  const t=topicSelect.value,l=levelSelect.value;
  const arr=qBank[t][l];
  let idx;
  do{ idx=Math.floor(Math.random()*arr.length); }
  while(arr.length>1 && idx===lastIndex);
  lastIndex=idx;
  const q=arr[idx];
  question.innerText=q.q;
  currentAnswer=q.a;
  currentTip=q.tip;
  feedback.innerText="";
  answer.value="";
}

function checkAnswer(){
  if(answer.value.trim()===currentAnswer){
    feedback.innerText="Correct!";
    feedback.className="success";
    stats.total++;stats[topicSelect.value]++;
    localStorage.setItem("stats",JSON.stringify(stats));
    updateStats();
    setTimeout(loadQuestion,600);
  }else{
    wrongCount++;
    feedback.innerText="Wrong answer";
    feedback.className="error";
    if(wrongCount>=2){
      if(confirm("View answer & tips?")){
        feedback.innerText=`Answer: ${currentAnswer}\nTip: ${currentTip}`;
      }
    }
  }
}

/* ---------- Goals & Rewards ---------- */
function addGoal(){
  if(goalPairs.length>=5) return alert("Max 5 goals");
  if(!goalInput.value||!rewardInput.value) return;
  goalPairs.push({goal:goalInput.value,reward:rewardInput.value});
  localStorage.setItem("goalPairs",JSON.stringify(goalPairs));
  goalInput.value="";rewardInput.value="";
  renderGoals();
}
function renderGoals(){
  goalList.innerHTML="";
  goalPairs.forEach(p=>{
    const li=document.createElement("li");
    li.innerText=`üéØ ${p.goal} ‚Üí üéÅ ${p.reward}`;
    goalList.appendChild(li);
  });
}

/* ---------- Profile ---------- */
function saveProfile(){
  localStorage.setItem("name",nameInput.value);
  localStorage.setItem("motivation",motivationInput.value);
  profileMsg.innerText="Saved successfully!";
  profileMsg.className="success";
}

/* ---------- Data ---------- */
function updateStats(){
  total.innerText=stats.total;
  vectorCount.innerText=stats.vector;
  integrationCount.innerText=stats.integration;
}

/* ---------- Clear ---------- */
function clearAll(){
  if(confirm("Clear ALL data?")){
    localStorage.clear();
    location.reload();
  }
}

/* ---------- Init ---------- */
loadQuestion();
renderGoals();
updateStats();

/* ---------- Countdown ---------- */
const exam=new Date("2026-05-04");
setInterval(()=>{
  countdown.innerText=Math.ceil((exam-new Date())/86400000)+" days";
},1000);
</script>

</body>
</html>